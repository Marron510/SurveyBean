<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Survey</title>
    <link rel="stylesheet" th:href="@{/css/survey-detail.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<header class="header">
    <a th:href="@{/}" class="logo">SurveyBean</a>
    <nav class="nav">
        <a th:href="@{/logout}">로그아웃</a>
    </nav>
</header>

<div class="survey-container">
    <div class="survey-header">
        <h1 th:text="${survey.title}">Survey Title</h1>
        <p th:text="${survey.description}">Survey Description</p>
    </div>

    <hr>

    <form id="surveyForm">
        <div th:each="question, iterStat : ${survey.questions}" class="question-block" th:attr="data-question-id=${question.questionId}, data-question-type=${question.type}">
            <h5 th:text="${(iterStat.index + 1) + '. ' + question.text}">Question Text</h5>
            <p>Question Type: <span th:text="${question.type}"></span></p>

            <div th:switch="${question.type}">
                <!-- Single Choice Question -->
                <div th:case="'SINGLE_CHOICE'">
                    <div th:each="choice : ${question.choices}" class="choice-item">
                        <input type="radio" th:name="'question-' + ${question.questionId}" th:value="${choice.choiceId}" required>
                        <label th:text="${choice.text}">Choice Text</label>
                    </div>
                </div>

                <!-- Multiple Choice Question -->
                <div th:case="'MULTIPLE_CHOICE'">
                    <div th:each="choice : ${question.choices}" class="choice-item">
                        <input type="checkbox" th:name="'question-' + ${question.questionId}" th:value="${choice.choiceId}">
                        <label th:text="${choice.text}">Choice Text</label>
                    </div>
                </div>

                <!-- Text Question -->
                <div th:case="'TEXT'">
                    <textarea class="form-control" th:name="'question-' + ${question.questionId}" rows="4" placeholder="답변을 입력하세요..."></textarea>
                </div>
            </div>
        </div>

        <div class="submit-btn-container">
            <button type="submit" class="btn">답변 제출</button>
        </div>
    </form>
    <div id="message" style="margin-top: 20px; text-align: center;"></div>
</div>

<script th:src="@{/js/survey-detail.js}"></script>
</body>
</html>